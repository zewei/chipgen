# 参数验证测试用例
# 用于测试Arch.yaml中定义的参数合法性检查规则

test_cases:
  # 测试用例1: RCC频率参数验证
  - name: "rcc_frequency_valid"
    description: "有效的RCC频率参数"
    target: instance.rcc.parameter.FREQUENCY
    value: 400000000
    expected_result: pass
    
  - name: "rcc_frequency_too_low"
    description: "过低的RCC频率参数"
    target: instance.rcc.parameter.FREQUENCY
    value: 500000
    expected_result: fail
    expected_rule: frequency_range_check
    
  - name: "rcc_frequency_too_high"
    description: "过高的RCC频率参数"
    target: instance.rcc.parameter.FREQUENCY
    value: 1500000000
    expected_result: fail
    expected_rule: frequency_range_check
    
  # 测试用例2: PLL数量验证
  - name: "pll_count_valid"
    description: "有效的PLL数量"
    target: instance.rcc.parameter.PLL_COUNT
    value: 4
    expected_result: pass
    
  - name: "pll_count_zero"
    description: "无效的PLL数量(0)"
    target: instance.rcc.parameter.PLL_COUNT
    value: 0
    expected_result: fail
    expected_rule: pll_count_validation
    
  - name: "pll_count_too_many"
    description: "过多的PLL数量"
    target: instance.rcc.parameter.PLL_COUNT
    value: 10
    expected_result: fail
    expected_rule: pll_count_validation
    
  # 测试用例3: Flash存储器参数验证
  - name: "flash_size_valid"
    description: "有效的Flash大小"
    target: instance.flash.parameter.FLASH_SIZE
    value: 4194304
    expected_result: pass
    
  - name: "flash_size_too_small"
    description: "过小的Flash大小"
    target: instance.flash.parameter.FLASH_SIZE
    value: 32768
    expected_result: fail
    expected_rule: flash_size_validation
    
  - name: "flash_size_too_large"
    description: "过大的Flash大小"
    target: instance.flash.parameter.FLASH_SIZE
    value: 33554432
    expected_result: fail
    expected_rule: flash_size_validation
    
  # 测试用例4: GPIO参数验证
  - name: "gpio_pin_count_valid"
    description: "有效的GPIO引脚数量"
    target: instance.gpioa.parameter.PIN_COUNT
    value: 16
    expected_result: pass
    
  - name: "gpio_pin_count_zero"
    description: "无效的GPIO引脚数量(0)"
    target: instance.gpioa.parameter.PIN_COUNT
    value: 0
    expected_result: fail
    expected_rule: gpio_pin_count
    
  - name: "gpio_pin_count_too_many"
    description: "过多的GPIO引脚数量"
    target: instance.gpioa.parameter.PIN_COUNT
    value: 40
    expected_result: fail
    expected_rule: gpio_pin_count
    
  # 测试用例5: 时钟频率参数验证
  - name: "cpu_frequency_valid"
    description: "有效的CPU时钟频率"
    target: instance.cortexa35.parameter.FREQUENCY
    value: 800000000
    expected_result: pass
    
  - name: "cpu_frequency_warning"
    description: "CPU时钟频率警告范围"
    target: instance.cortexa35.parameter.FREQUENCY
    value: 500000
    expected_result: warning
    expected_rule: cpu_frequency_range
    
  - name: "peripheral_frequency_valid"
    description: "有效的外设时钟频率"
    target: instance.gpioa.parameter.FREQUENCY
    value: 100000000
    expected_result: pass
    
  - name: "peripheral_frequency_warning"
    description: "外设时钟频率警告"
    target: instance.gpioa.parameter.FREQUENCY
    value: 50000
    expected_result: warning
    expected_rule: peripheral_frequency_range
    
  # 测试用例6: 系统参数验证
  - name: "power_domain_valid"
    description: "有效的电源域数量"
    target: instance.pwr.parameter.POWER_DOMAIN_COUNT
    value: 5
    expected_result: pass
    
  - name: "dma_channel_valid"
    description: "有效的DMA通道数量"
    target: instance.dma1.parameter.CHANNEL_COUNT
    value: 8
    expected_result: pass
    
  - name: "interrupt_priority_valid"
    description: "有效的中断优先级位宽"
    target: instance.nvic.parameter.PRIORITY_BITS
    value: 4
    expected_result: pass
    
  # 测试用例7: 安全参数验证
  - name: "boot_mode_valid"
    description: "有效的启动模式数量"
    target: instance.syscfg.parameter.BOOT_MODE_COUNT
    value: 8
    expected_result: pass
    
  - name: "exti_line_valid"
    description: "有效的外部中断线数量"
    target: instance.syscfg.parameter.EXTI_COUNT
    value: 128
    expected_result: pass
    
  # 测试用例8: 工作条件参数验证
  - name: "temperature_valid"
    description: "有效的工作温度"
    target: instance.cortexa35.parameter.OPERATING_TEMP
    value: 85
    expected_result: pass
    
  - name: "temperature_too_low"
    description: "过低的工作温度"
    target: instance.cortexa35.parameter.OPERATING_TEMP
    value: -50
    expected_result: fail
    expected_rule: temperature_range_check
    
  - name: "voltage_valid"
    description: "有效的工作电压"
    target: instance.cortexa35.parameter.OPERATING_VOLTAGE
    value: 1.2
    expected_result: pass
    
  - name: "voltage_invalid"
    description: "无效的工作电压"
    target: instance.cortexa35.parameter.OPERATING_VOLTAGE
    value: 2.5
    expected_result: fail
    expected_rule: voltage_compatibility

validation_summary:
  total_test_cases: 30
  expected_pass: 20
  expected_fail: 8
  expected_warning: 2
  coverage_rules: 25
  
  rule_coverage:
    - rule_type: rcc_parameter_rules
      rules_covered: 3
      test_cases: 6
    
    - rule_type: clock_frequency_rules
      rules_covered: 3
      test_cases: 4
    
    - rule_type: memory_parameter_rules
      rules_covered: 3
      test_cases: 3
    
    - rule_type: peripheral_parameter_rules
      rules_covered: 3
      test_cases: 3
    
    - rule_type: system_parameter_rules
      rules_covered: 3
      test_cases: 3
    
    - rule_type: security_parameter_rules
      rules_covered: 3
      test_cases: 2
    
    - rule_type: performance_parameter_rules
      rules_covered: 3
      test_cases: 3
    
    - rule_type: compatibility_rules
      rules_covered: 2
      test_cases: 2

execution_notes: |
  测试用例执行说明：
  1. 每个测试用例都应该独立执行，避免相互影响
  2. 验证失败时应该提供详细的错误信息，包括参数路径、当前值、期望值
  3. 警告级别的验证不应该阻止设计的正常处理流程
  4. 错误级别的验证应该阻止设计处理，直到问题被修复
  5. 测试结果应该生成详细的报告，包括通过率、失败原因分析等
  
  验证流程：
  1. 加载Arch.yaml文件和所有验证规则
  2. 按顺序执行每个测试用例
  3. 记录每个测试用例的执行结果
  4. 生成验证报告和统计分析
  5. 提供修复建议和最佳实践指导